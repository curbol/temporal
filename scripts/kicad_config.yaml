# KiCad Project Defaults Configuration
# Used by scripts/setup_kicad_project.js to generate .kicad_pro files

# Default net class (applied to most signals)
net_class_default:
  track_width: 0.25 # Default trace width for signals in mm
  via_diameter: 0.6 # Via outer diameter in mm
  via_drill: 0.3 # Via drill/hole diameter in mm
  clearance: 0.2 # Clearance between traces in mm
  diff_pair_width: 0.2 # Differential pair trace width in mm
  diff_pair_gap: 0.25 # Gap between differential pair traces in mm
  microvia_diameter: 0.3 # Microvia outer diameter in mm
  microvia_drill: 0.1 # Microvia drill diameter in mm

# Additional net classes for different trace widths
net_classes:
  - name: "Power"
    track_width: 0.375
    via_diameter: 0.6
    via_drill: 0.3
    clearance: 0.2
    diff_pair_width: 0.2
    diff_pair_gap: 0.25
    microvia_diameter: 0.3
    microvia_drill: 0.1

  - name: "Battery"
    track_width: 0.5 # Battery traces in mm
    via_diameter: 0.6
    via_drill: 0.3
    clearance: 0.2
    diff_pair_width: 0.2
    diff_pair_gap: 0.25
    microvia_diameter: 0.3
    microvia_drill: 0.1

# Netclass assignment patterns (wildcards supported)
netclass_patterns:
  - pattern: "VCC"
    netclass: "Power"
  - pattern: "BAT*"
    netclass: "Battery"

# Design Rules (minimum values enforced by DRC)
design_rules:
  min_clearance: 0.0 # Minimum clearance between copper features in mm
  min_track_width: 0.0 # Minimum trace width in mm
  min_via_diameter: 0.5 # Minimum via outer diameter in mm
  min_via_annular_width: 0.1 # Minimum via annular ring width in mm
  min_copper_edge_clearance: 0.5 # Minimum clearance from board edge in mm
  min_hole_clearance: 0.25 # Minimum clearance from holes in mm
  min_hole_to_hole: 0.25 # Minimum hole-to-hole spacing in mm
  min_microvia_diameter: 0.2 # Minimum microvia outer diameter in mm
  min_microvia_drill: 0.1 # Minimum microvia drill diameter in mm
  min_through_hole_diameter: 0.3 # Minimum through-hole diameter in mm

# Board Defaults
board_defaults:
  board_outline_line_width: 0.05 # Board outline line width in mm
  copper_line_width: 0.2 # Default copper line width in mm
  copper_text_size_h: 1.5 # Copper text height in mm
  copper_text_size_v: 1.5 # Copper text width in mm
  copper_text_thickness: 0.3 # Copper text thickness in mm
  silk_line_width: 0.1 # Silkscreen line width in mm
  silk_text_size_h: 1.0 # Silkscreen text height in mm
  silk_text_size_v: 1.0 # Silkscreen text width in mm
  silk_text_thickness: 0.1 # Silkscreen text thickness in mm
  zones_min_clearance: 0.5 # Minimum clearance for zones in mm

# Zone Fill Settings (used by add_ground_planes.js)
zones:
  clearance: 0.2 # Zone clearance from other features in mm
  min_thickness: 0.2 # Minimum zone fill thickness in mm
  thermal_gap: 0.254 # Thermal relief gap in mm
  thermal_bridge_width: 0.4 # Thermal relief spoke width in mm
  smoothing_radius: 0.5 # Corner smoothing radius in mm
  hatch_thickness: 0.5 # Hatch pattern line thickness in mm
  hatch_gap: 0.5 # Hatch pattern spacing in mm
  hatch_orientation: 45 # Hatch pattern orientation in degrees
  hatch_smoothing_level: 1 # Hatch smoothing (0=none, 1=light, 2=heavy)

# Via Stitching Settings (used by via_stitching.js)
# CLI: node scripts/via_stitching.js [step_mm]
via_stitching:
  net_name: "GND" # Net name to add via stitching to
  step_mm: 6 # Spacing between vias in mm (grid size, smaller = more vias)
  size_mm: 0.6 # Via copper diameter in mm
  drill_mm: 0.3 # Via drill hole diameter in mm
  clearance_mm: 0.2 # Clearance around vias in mm

# PCB File Settings
pcb_settings:
  pad_to_mask_clearance: 0.05 # Solder mask clearance from pads in mm

# Text Keepout Settings (used by create_text_keepouts.js)
text_keepouts:
  patterns: ["Temporal", "curbol", "Right", "Left", "Back", "(M↓)"] # Text to create keepouts for (empty array = all text)

# JLCPCB Assembly Configuration (used by generate_jlcpcb_files.js)
jlcpcb:
  assembly_parts:
    - footprint: "ceoloide:diode_tht_sod123"
      lcsc_part: "C81598"
      description: "1N4148W Diode SOD-123"

  # Embedded resistor pads within parent footprints (for jumper bridging)
  # These are 0402 0-ohm resistors that overlay solder jumper pads
  embedded_resistors:
    lcsc_part: "C17168"  # 0402 0-ohm resistor
    description: "0402 0-Ohm Resistor"

    # MCU resistor positions (relative to footprint center)
    # 12 rows per side, 2 resistors per row (left and right)
    mcu_nice_nano:
      parent_footprint: "ceoloide:mcu_nice_nano"
      resistor_x_offsets: [-5.03, 5.03]  # Center between pad pairs
      resistor_y_offsets: [-12.7, -10.16, -7.62, -5.08, -2.54, 0, 2.54, 5.08, 7.62, 10.16, 12.7, 15.24]
      rotation_offset: 0  # Horizontal pads need 0° rotation

    # Display resistor positions (relative to footprint center)
    # 4 resistors for CS, SCK, MOSI, VCC signals
    display_nice_view:
      parent_footprint: "ceoloide:display_nice_view"
      positions:  # [x, y] relative to footprint
        - [-5.08, 14.5]
        - [-2.54, 14.5]
        - [2.54, 14.5]
        - [5.08, 14.5]
      rotation_offset: 90

    # Battery resistor positions (relative to footprint center)
    # 2 resistors for BAT_P and BAT_N
    battery_connector:
      parent_footprint: "ceoloide:battery_connector_jst_ph_2"
      positions:
        - [-1, 2.158]  # BAT_P side
        - [1, 2.158]   # BAT_N side
      rotation_offset: 90  # Vertical pads need 90° rotation
